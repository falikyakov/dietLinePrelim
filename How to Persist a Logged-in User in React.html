<!DOCTYPE html>
<!-- saved from url=(0075)https://www.freecodecamp.org/news/how-to-persist-a-logged-in-user-in-react/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>How to Persist a Logged-in User in React</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="./How to Persist a Logged-in User in React_files/prism.min.css">
    <link rel="stylesheet" type="text/css" href="./How to Persist a Logged-in User in React_files/prism-unescaped-markup.css">

    <link href="./How to Persist a Logged-in User in React_files/css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./How to Persist a Logged-in User in React_files/screen.css">
    <link rel="stylesheet" type="text/css" href="./How to Persist a Logged-in User in React_files/algolia-search.css">

    <script type="text/javascript" async="" src="./How to Persist a Logged-in User in React_files/analytics.js.download"></script><script async="" src="./How to Persist a Logged-in User in React_files/gtm.js.download"></script><script src="./How to Persist a Logged-in User in React_files/algoliasearch.min.js.download"></script>
    <script src="./How to Persist a Logged-in User in React_files/autocomplete.min.js.download"></script>

    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/main.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/footer.js.download"></script>

    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/main.js(1).download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/footer.js(1).download"></script>

    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/main.js(2).download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/footer.js(2).download"></script>

    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/setup-locale.js.download"></script>


    <script src="./How to Persist a Logged-in User in React_files/dayjs.min.js.download"></script>
    <script src="./How to Persist a Logged-in User in React_files/localizedFormat.min.js.download"></script>
    <script src="./How to Persist a Logged-in User in React_files/relativeTime.min.js.download"></script>

    <script src="./How to Persist a Logged-in User in React_files/zh-cn.min.js.download"></script>


    <link rel="icon" href="https://www.freecodecamp.org/news/favicon.png" type="image/png">
    <link rel="canonical" href="https://www.freecodecamp.org/news/how-to-persist-a-logged-in-user-in-react/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="https://www.freecodecamp.org/news/how-to-persist-a-logged-in-user-in-react/amp/">
    
    <meta property="og:site_name" content="freeCodeCamp.org">
    <meta property="og:type" content="article">
    <meta property="og:title" content="How to Persist a Logged-in User in React">
    <meta property="og:description" content="If you run a quick Google search for persisting a logged-in user in React (or keeping a user logged in in React), you don&#39;t get a lot of straightforward results. There aren&#39;t really any easy to follow examples on how to achieve this. So I decided I had to write">
    <meta property="og:url" content="https://www.freecodecamp.org/news/how-to-persist-a-logged-in-user-in-react/">
    <meta property="og:image" content="https://www.freecodecamp.org/news/content/images/2020/06/Slice-3-1-.png">
    <meta property="article:published_time" content="2020-06-15T21:39:17.000Z">
    <meta property="article:modified_time" content="2020-06-15T21:39:17.000Z">
    <meta property="article:tag" content="React">
    <meta property="article:tag" content="localstorage">
    <meta property="article:tag" content="keep a user signed in">
    <meta property="article:tag" content="login forms">
    
    <meta property="article:publisher" content="https://www.facebook.com/freecodecamp">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to Persist a Logged-in User in React">
    <meta name="twitter:description" content="If you run a quick Google search for persisting a logged-in user in React (or keeping a user logged in in React), you don&#39;t get a lot of straightforward results. There aren&#39;t really any easy to follow examples on how to achieve this. So I decided I had to write">
    <meta name="twitter:url" content="https://www.freecodecamp.org/news/how-to-persist-a-logged-in-user-in-react/">
    <meta name="twitter:image" content="https://www.freecodecamp.org/news/content/images/2020/06/Slice-3-1-.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Adebola Adeniran">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="React, localstorage, keep a user signed in, login forms">
    <meta name="twitter:site" content="@freecodecamp">
    <meta name="twitter:creator" content="@debosthefirst">
    <meta property="og:image:width" content="2103">
    <meta property="og:image:height" content="1411">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "freeCodeCamp.org",
        "url": "https://www.freecodecamp.org/news/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://www.freecodecamp.org/news/content/images/2019/11/fcc_primary_large_24X210.svg",
            "width": 210,
            "height": 24
        }
    },
    "author": {
        "@type": "Person",
        "name": "Adebola Adeniran",
        "image": {
            "@type": "ImageObject",
            "url": "https://www.freecodecamp.org/news/content/images/2021/02/a083a61f-971a-40cb-8a98-0745a01c3fb7.jpeg",
            "width": 960,
            "height": 1280
        },
        "url": "https://www.freecodecamp.org/news/author/adebola/",
        "sameAs": [
            "http://adebola.dev",
            "https://twitter.com/debosthefirst"
        ]
    },
    "headline": "How to Persist a Logged-in User in React",
    "url": "https://www.freecodecamp.org/news/how-to-persist-a-logged-in-user-in-react/",
    "datePublished": "2020-06-15T21:39:17.000Z",
    "dateModified": "2020-06-15T21:39:17.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://www.freecodecamp.org/news/content/images/2020/06/Slice-3-1-.png",
        "width": 2103,
        "height": 1411
    },
    "keywords": "React, localstorage, keep a user signed in, login forms",
    "description": "If you run a quick Google search for persisting a logged-in user in React (or\nkeeping a user logged in in React), you don&#x27;t get a lot of straightforward\nresults. There aren&#x27;t really any easy to follow examples on how to achieve this.\nSo I decided I had to write that simple guide.\n\nYou may have done a search on this and saw the word localStorage being thrown\naround. Yes, we&#x27;ll be using localStorage but I&#x27;m going to show you exactly how\nit&#x27;s done. \n\nSome notes on localStorage.\n 1. localStorage is ",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://www.freecodecamp.org/news/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.39">
    <link rel="alternate" type="application/rss+xml" title="freeCodeCamp.org" href="https://www.freecodecamp.org/news/rss/">
    <!-- This is related to https://webmonetization.org/ -->
<meta name="monetization" content="$ilp.uphold.com/LJmbPn7WD4JB">
<!-- GAP -->


<!-- Google Tag Manager -->
<script>
  // Set up dataLayer with data if provided
  window.dataLayer = window.dataLayer || [{ gaPropertyId: 'UA-55446531-20' }];

  // Initialized GTM via gtag
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-55446531-20');

  // Configure and initialize GTM
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl+'&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer', 'GTM-5D6RKKP');
</script>
<!-- End Google Tag Manager -->


<meta name="google-site-verification" content="b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E">

<style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></head>

<body class="post-template tag-react tag-localstorage tag-keep-a-user-signed-in tag-login-forms">

    <div class="site-wrapper">
        <nav class="site-nav nav-padding">
    <div class="site-nav-left">
        <form id="search-form" onsubmit="submitSearch()">
  <div role="search" class="searchbox__wrapper">
    <input type="search" placeholder="Search 6,000+ tutorials" id="search-input" class="aa-input" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="true" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style=""><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Lato, sans-serif; font-size: 18px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre>
    <button type="submit" title="Submit your search query." class="ais-SearchBox-submit">
      <svg class="ais-SearchBox-submitIcon" xmlns="https://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 40 40">
        <path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path>
      </svg>
    </button>
    <div id="dropdown-container"><span class="algolia-autocomplete" style="position: absolute; z-index: 100; direction: ltr; display: none; width: 449.797px; top: 32px; left: 25px;"><span class="aa-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="display: block; left: 0px; right: auto;"><div class="aa-dataset-1"></div></span></span></div>
  </div>
</form>

<script>
  const client = algoliasearch('QMJYL5WYTI', '4318af87aa3ce128708f1153556c6108');
  const index = client.initIndex(main['algolia-index-name']);
  const screenWidth = window.screen.width;
  const screenHeight = window.screen.height;
  const hitsToRender = (screenWidth >= 767 && screenHeight >= 768) ? 8 : 5;
  const searchForm = document.getElementById('search-form');
  const input = document.getElementById('search-input');
  const dropdownContainer = document.getElementById('dropdown-container');
  let searchQuery, hitSelected, hits;

  input.addEventListener('input', e => {
    searchQuery = e.target.value;
  });

  // Prevent form from being submitted with magnifying
  // glass or enter when there is no query or hits
  searchForm.addEventListener('submit', e => {
    e.preventDefault();

    submitSearch();
  });

  const search = autocomplete('#search-input', { 
      hint: false,
      keyboardShortcuts: ['s', 191],
      openOnFocus: true,
      appendTo: dropdownContainer,
      debug: true // allow tabbing through results
    }, [
    {
      source: autocomplete.sources.hits(index, { hitsPerPage: hitsToRender }),
      debounce: 250,
      templates: {
        suggestion: (suggestion, result) => {
          hits = true;
          return `
            <a href="${suggestion.url}">
              <div class="algolia-result">
                <span>${suggestion._highlightResult.title.value}</span>
              </div>
            </a>
          `;
        },
        empty: (options) => {
          hits = false;
          return `
            <div class="aa-suggestion footer-suggestion no-hits-footer">
              <div class="algolia-result">
                <span>
                  No tutorials found
                </span>
              </div>
            </div>
          `;
        },
        footer: (query, result) => {
          if (!query.isEmpty) {
            return `
              <div class="aa-suggestion footer-suggestion">
                <a id="algolia-footer-selector" href="https://www.freecodecamp.org/news/search?query=${searchQuery}">
                  <div class="algolia-result algolia-footer">
                    <span>See all results for ${searchQuery}</span>
                  </div>
                </a>
              </div>
            `;
          }
        }
      }
    }
  ]).on('autocomplete:selected', (event, suggestion, dataset, context) => {
    // If article is selected, set to URL of the article. 
    // If footer is selected, set to search results path
    hitSelected = suggestion ? suggestion.url : `https://www.freecodecamp.org/news/search?query=${searchQuery}`;

    // Let browser handle click, and do not go to selection on tab key press
    if (context.selectionMethod === 'click' || context.selectionMethod === 'tabKey') {
      return;
    }

    // Go to selected article or footer path
    if (hits) {
      window.location.assign(hitSelected);
    }
  });

  // Go to highlighted hit or search for current query
  // when magnifying glass or enter is pressed
  function submitSearch() {
    hitSelected = document.getElementsByClassName('aa-cursor')[0];

    if (hitSelected && searchQuery) {
      const articleUrl = hitSelected.querySelector('a').href;
      window.location.assign(articleUrl);
    } else if (!hitSelected && searchQuery && hits) {
      window.location.assign(`https://www.freecodecamp.org/news/search?query=${searchQuery}`);
    }
  }

  // close dropbar when clicking off 
  document.addEventListener('click', e => {
    if (e.target !== input) {
      search.autocomplete.close();
    }
  });
</script>
    </div>
    <div class="site-nav-middle">
        <a class="site-nav-logo" href="https://www.freecodecamp.org/news"><img src="./How to Persist a Logged-in User in React_files/fcc_primary_large_24X210.svg" alt="freeCodeCamp.org"></a>
    </div>
    <div class="site-nav-right">
        <div class="nav-group">
            <a class="nav-forum" id="nav-forum" rel="noopener noreferrer" target="_blank" href="https://forum.freecodecamp.org/">Forum</a>

            <a class="toggle-button-nav" id="nav-donate" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/donate/">
                Donate
            </a>
        </div>

    </div>
</nav>


        <a class="banner" id="banner" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/">
    <p>
        Learn to code — <span>free 3,000-hour curriculum</span>
    </p>
</a>


        <div id="error-message"></div>

        




<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-react tag-localstorage tag-keep-a-user-signed-in tag-login-forms ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="June 15, 2020">June 15, 2020</time>
                    <span class="date-divider">/</span>
                    <a href="https://www.freecodecamp.org/news/tag/react/">
                        #React
                    </a>
                </section>
                <h1 class="post-full-title">How to Persist a Logged-in User in React</h1>
            </header>

            <div class="post-full-author-header">


                
<section class="author-card">
    <img class="author-profile-image" src="./How to Persist a Logged-in User in React_files/a083a61f-971a-40cb-8a98-0745a01c3fb7.jpeg" alt="Adebola Adeniran">
    <section class="author-card-content author-card-content-no-bio">
        <h4 class="author-card-name"><a href="https://www.freecodecamp.org/news/author/adebola/">Adebola Adeniran</a></h4>
    </section>
</section>


            </div>

            <figure class="post-full-image">
                <img srcset="/news/content/images/size/w300/2020/06/Slice-3-1-.png 300w,
                            /news/content/images/size/w600/2020/06/Slice-3-1-.png 600w,
                            /news/content/images/size/w1000/2020/06/Slice-3-1-.png 1000w,
                            /news/content/images/size/w2000/2020/06/Slice-3-1-.png 2000w" sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px" src="./How to Persist a Logged-in User in React_files/Slice-3-1-.png" alt="How to Persist a Logged-in User in React" onerror="this.style.display=&#39;none&#39;">
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>If you run a quick Google search for persisting a logged-in user in React (or keeping a user logged in in React), you don't get a lot of straightforward results. There aren't really any easy to follow examples on how to achieve this. So I decided I had to write that simple guide.</p><p>You may have done a search on this and saw the word <strong>localStorage</strong> being thrown around. Yes, we'll be using <strong>localStorage</strong> but I'm going to show you exactly how it's done. </p><h2 id="some-notes-on-localstorage-">Some notes on localStorage.</h2><ol><li><strong>localStorage</strong> is the browser's database. The data is stored inside your browser in your computer's memory.</li><li><strong>localStorage </strong>is specific to an origin. In other words, the localStorage for one website cannot be accessed by another.</li></ol><h2 id="initial-setup">Initial setup</h2><p>Let's get started. I've deployed a simple express server to Heroku for use in testing this application.</p><ol><li>Create a new React application and head into the <strong><code>&lt;App /&gt;</code> </strong>component. </li><li>Install axios using <code>npm install axios</code> and import it inside <strong><code>&lt;App /&gt;</code></strong></li><li>Next, create a simple login form that accepts a username and password. </li></ol><!--kg-card-begin: markdown--><pre><code>import React, { useState } from "react";
import axios from "axios";

const App = () =&gt; {
  const [username, setUsername] = useState("");
  const [password, setPassword] = useState("");
  const [user, setUser] = useState()

  const handleSubmit = async e =&gt; {
    
  };

// if there's a user show the message below
  if (user) {
    return &lt;div&gt;{user.name} is loggged in&lt;/div&gt;;
  }

  // if there's no user, show the login form
  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;label htmlFor="username"&gt;Username: &lt;/label&gt;
      &lt;input
        type="text"
        value={username}
        placeholder="enter a username"
        onChange={({ target }) =&gt; setUsername(target.value)}
      /&gt;
      &lt;div&gt;
        &lt;label htmlFor="password"&gt;password: &lt;/label&gt;
        &lt;input
          type="password"
          value={password}
          placeholder="enter a password"
          onChange={({ target }) =&gt; setPassword(target.value)}
        /&gt;
      &lt;/div&gt;
      &lt;button type="submit"&gt;Login&lt;/button&gt;
    &lt;/form&gt;
  );
};

export default App;

</code></pre>
<!--kg-card-end: markdown--><p>As you can see, we've defined an asynchronous <strong>handleSubmit </strong>function to process the login request. We've also defined a conditional that displays a <strong>user.name is logged in </strong>message if we have a user, and the login form if we do not have a user.</p><p>Next, let's complete the function. This function will work in the following steps:</p><ol><li>Send the login details to the server.</li><li>If the request is successful (async-await), store the user information in &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;	localStorage and set the State of the User.</li></ol><h2 id="handle-the-login-event">Handle the login event</h2><p>Let's define the <strong>handleSubmit </strong>event handler.</p><!--kg-card-begin: markdown--><pre><code>const handleSubmit = async e =&gt; {
  e.preventDefault();
  const user = { username, password };
  // send the username and password to the server
  const response = await axios.post(
    "http://blogservice.herokuapp.com/api/login",
    user
  );
  // set the state of the user
  setUser(response.data)
  // store the user in localStorage
  localStorage.setItem('user', response.data)
  console.log(response.data)
};
</code></pre>
<!--kg-card-end: markdown--><p>Note: Use a <strong>tryCatch </strong>block to handle errors in async functions.</p><p>Now that our function is done, you can run <strong>npm start </strong>to test out your app. Login with the <strong>username</strong>: user2, <strong>password</strong>: password.</p><p>You should receive the following as a response. The <em>userId</em>, <em>token</em> and <em>username</em></p><figure class="kg-card kg-image-card"><img src="./How to Persist a Logged-in User in React_files/image-52.png" class="kg-image" alt=""></figure><h2 id="check-if-a-user-has-previously-logged-in">Check if a user has previously logged in</h2><p>Next, we want a way to check if there's a user logged in each time the App loads. For that, we use the useEffect hook. </p><!--kg-card-begin: markdown--><pre><code> useEffect(() =&gt; {
    const loggedInUser = localStorage.getItem("user");
    if (loggedInUser) {
      const foundUser = JSON.parse(loggedInUser);
      setUser(foundUser);
    }
  }, []);
</code></pre>
<!--kg-card-end: markdown--><p>Remember to use an empty dependency array in your useEffect hook so that it checks if there's a logged in user the first time the app loads.</p><p>Now our app should work perfectly. We get the page below after a user has logged in for the first time and their details are stored. If you refresh the page, you'll see that our user stays logged in and the logged in page continues to show.</p><figure class="kg-card kg-image-card"><img src="./How to Persist a Logged-in User in React_files/image-55.png" class="kg-image" alt=""></figure><p><br><br>As a bonus tip, here's how to implement logout.</p><h2 id="implementing-logout-functionality">Implementing Logout functionality</h2><p>For logging out, we simply empty the user state and remove the user from localStorage. </p><p>Let's implement that. </p><p>First, we create a logout button</p><!--kg-card-begin: markdown--><pre><code>&lt;button onClick={handleLogout}&gt;logout&lt;/button&gt;
</code></pre>
<!--kg-card-end: markdown--><p>Then, we create the logout function.</p><!--kg-card-begin: markdown--><pre><code>const handleLogout = () =&gt; {
    setUser({});
    setUsername("");
    setPassword("");
    localStorage.clear();
  };
</code></pre>
<!--kg-card-end: markdown--><p>And that's it, we're done.</p><p>Here's a link to the full <a href="https://gist.github.com/onedebos/bbf7cd4634bce53103c1cfefa6164637">gist</a> on GitHub. You can follow me there for more updates.</p><p></p>
                </div>
                <hr>

                <div class="post-full-author-header">
                    
<section class="author-card">
    <img class="author-profile-image" src="./How to Persist a Logged-in User in React_files/a083a61f-971a-40cb-8a98-0745a01c3fb7.jpeg" alt="Adebola Adeniran">
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="https://www.freecodecamp.org/news/author/adebola/">Adebola Adeniran</a></h4>
        <p>I'm a Ruby-on-Rails/Node.js/React full-stack developer passionate about jollof rice and plantain. </p>
    </section>
</section>


                </div>
                <hr>

                <p class="social-row">

    If you read this far, tweet to the author to show them you care. <a id="tweet-btn" class="cta-button">Tweet a thanks</a>
</p>

                
<div class="learn-cta-row">
    <p>
        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a class="cta-button" id="learn-to-code-cta" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/learn/">Get started</a>
    </p>
</div>

                  <script>
    // Conditionally show comments section based on publication language setting
    const showCommentsList = ['zh-cn'];

    if (showCommentsList.includes(`en`)) {
      const hostname = window.location.hostname;
      const discourseEmbedMap = {
        'www.freecodecamp.org': {
          file: 'https://forum.freecodecamp.org/srv/status',
          discourseUrl: 'https://forum.freecodecamp.org/'
        },
        'chinese.freecodecamp.org': {
          file: 'https://chinese.freecodecamp.org/forum/srv/status',
          discourseUrl: 'https://chinese.freecodecamp.org/forum/',
        },
        'dev': {
          file: 'https://forum.freecodecamp.dev/srv/status',
          discourseUrl: 'https://forum.freecodecamp.dev/'
        },
      };
      const discourseEmbedInfo = discourseEmbedMap[hostname] ? discourseEmbedMap[hostname] : discourseEmbedMap['dev'];
      const { file, discourseUrl } = discourseEmbedInfo;

      function loadDiscourseComments() {
        var xhr = new XMLHttpRequest();
        var randomNum = Math.round(Math.random() * 10000);
        xhr.open('HEAD', file + '?rand=' + randomNum, true);
        xhr.send();
        xhr.addEventListener('readystatechange', processRequest, false);
        function processRequest(e) {
          if (xhr.readyState == 4) {
            if (xhr.status >= 200 && xhr.status < 304) {
              document.getElementById('discourse-comments').innerHTML = '';
              DiscourseEmbed = {
                discourseUrl,
                discourseEmbedUrl: 'https://www.freecodecamp.org/news/how-to-persist-a-logged-in-user-in-react/'
              };
              var d = document.createElement('script');
              d.type = 'text/javascript';
              d.async = true;
              d.src = discourseUrl + 'javascripts/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
            } else {
              document.getElementById('discourse-comments').innerHTML =
                '<div style="text-align: center;">Sorry, we could not load the comments. Please try again after some time.</div>';
            }
          }
        }
      }

      if (window && window.addEventListener) {
        // Create comments section
        const commentsDivHtml = `
          <div id='discourse-comments'>
            <button id='trigger-load-comments'>Show comments</button>
          </div>
        `;
        const fullContentSection = document.getElementsByClassName('post-full-content')[0];
        fullContentSection.insertAdjacentHTML('beforeend', commentsDivHtml);

        window.addEventListener('load', function () {
          document.getElementById('trigger-load-comments').onclick = loadDiscourseComments;
        });
      }
    }
  </script>
            </section>

        </article>
    </div>
</main>




        <footer class="site-footer">
    <div class="footer-container">
        <div class="footer-top">
            <div class="footer-desc-col">
                <p>
                    freeCodeCamp is a donor-supported tax-exempt 501(c)(3) nonprofit organization (United States Federal Tax Identification Number: 82-0779546)
                </p>
                <p>
                    Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public. We also have thousands of freeCodeCamp study groups around the world.
                </p>
                <p>
                    Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.
                </p>
                <p class="footer-donation">
                    You can <a id="footer-donation" class="inline" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/donate/">make a tax-deductible donation here</a>.
                </p>
            </div>
            <div class="trending-guides">
                <div class="col-header">Trending Guides</div>
                <div class="trending-guides-row">
                    <div class="footer-col footer-col-1">
                        <a id="article0" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/what-is-docker-used-for-a-docker-container-tutorial-for-beginners/">What is Docker?</a>
                        <a id="article1" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/what-is-tcp-ip-layers-and-protocols-explained/">TCP/IP Model</a>
                        <a id="article2" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/rtf-file-what-is-the-rich-text-format/">RTF File</a>
                        <a id="article3" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/css-transition-examples/">CSS Transition</a>
                        <a id="article4" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/how-to-use-instagram-like-a-pro/">How to Use Instagram?</a>
                        <a id="article5" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/mbr-vs-gpt-whats-the-difference-between-an-mbr-partition-and-a-gpt-partition-solved/">MBR VS GPT</a>
                        <a id="article6" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/how-to-format-a-usb-drive-to-fat32-on-windows-10/">FAT32 Format</a>
                        <a id="article7" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/http-error-503-service-unavailable-explained-what-the-503-error-code-means/">Error 503 Code</a>
                        <a id="article8" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/how-to-find-and-edit-a-windows-hosts-file/">Windows Hosts File</a>
                        <a id="article9" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/mobi-to-pdf-how-to-convert-to-and-from-a-mobi-file/">Mobi to PDF</a>
                    </div>
                    <div class="footer-col footer-col-2">
                        <a id="article10" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/what-is-stem-the-meaning-of-an-acronym-youll-hear-a-lot-in-school/">What is STEM?</a>
                        <a id="article11" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/javascript-void-keyword-explained/">JavaScript Void 0</a>
                        <a id="article12" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/sql-delete-row-statement-examples/">SQL Delete Row</a>
                        <a id="article13" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/javascript-string-replace-example-with-regex/">JavaScript Replace</a>
                        <a id="article14" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/python-read-json-file-how-to-load-json-from-a-file-and-parse-dumps/">Python JSON Parser</a>
                        <a id="article15" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/cmd-delete-folder-how-to-remove-files-and-folders-in-windows/">cmd Delete Folder</a>
                        <a id="article16" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/what-is-nfc-near-field-communication-uses-chips-tags-and-readers-explained/">What is NFC?</a>
                        <a id="article17" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/what-is-the-correct-content-type-for-json-request-header-mime-type-explained/">Content Type JSON</a>
                        <a id="article18" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/heic-to-jpg-how-to-convert-images-on-a-mac/">Convert HEIC to JPG</a>
                        <a id="article19" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/generate-random-numbers-java/">Math Random Java</a>
                    </div>
                    <div class="footer-col footer-col-3">
                        <div class="footer-left">
                            <a id="article20" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/how-to-start-a-blog-with-wordpress/">WordPress for Beginners</a>
                            <a id="article21" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/qualitative-vs-quantitative-definition-research-methods-and-data/">Qualitative VS Quantitative</a>
                            <a id="article22" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/javascript-split-string-example/">JavaScript Split String</a>
                            <a id="article23" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/how-to-type-letters-with-accents-on-mac/">Accented Letters on Mac</a>
                            <a id="article24" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/how-to-find-a-windows-10-product-key/">Windows 10 Product Key</a>
                        </div>

                        <div class="footer-right">
                            <a id="article25" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/google-docs-landscape-tutorial-how-to-make-a-google-doc-landscape-orientation/">Google Docs Landscape</a>
                            <a id="article26" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/antimalware-service-executable-what-is-msmpeng-exe-and-why-is-it-running-in-windows-10/">Antimalware Executable</a>
                            <a id="article27" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/windows-10-start-menu-not-working-solved/">Windows 10 Start Menu</a>
                            <a id="article28" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/how-to-open-the-command-prompt-in-windows-10/">Windows 10 Command Line</a>
                            <a id="article29" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/google-account-recovery-change-gmail-password/">Google Account Recovery</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="col-header">Our Nonprofit</div>
            <div class="footer-divider"></div>
            <div class="our-nonprofit">
                <a id="about" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/about/">About</a>
                <a id="alumni" rel="noopener noreferrer" target="_blank" href="https://www.linkedin.com/school/free-code-camp/people/">Alumni Network</a>
                <a id="open-source" rel="noopener noreferrer" target="_blank" href="https://github.com/freeCodeCamp/">Open Source</a>
                <a id="shop" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/shop/">Shop</a>
                <a id="support" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/support/">Support</a>
                <a id="sponsors" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/sponsors/">Sponsors</a>
                <a id="honesty" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/academic-honesty-policy/">Academic Honesty</a>
                <a id="coc" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/code-of-conduct/">Code of Conduct</a>
                <a id="privacy" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/privacy-policy/">Privacy Policy</a>
                <a id="tos" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/terms-of-service/">Terms of Service</a>
                <a id="copyright" rel="noopener noreferrer" target="_blank" href="https://www.freecodecamp.org/news/copyright-policy/">Copyright Policy</a>
            </div>
        </div>
    </div>
</footer>


    </div>

    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>

    <script src="./How to Persist a Logged-in User in React_files/jquery-3.2.1.min.js.download" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
        </script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/jquery.fitvids.js.download"></script>

    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-unescaped-markup.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-markup-templating.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-bash.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-c.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-clojure.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-cpp.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-csharp.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-css.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-docker.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-elixir.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-erlang.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-git.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-go.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-graphql.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-haskell.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-java.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-javascript.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-json.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-jsx.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-kotlin.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-lua.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-markup.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-php.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-python.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-r.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-ruby.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-rust.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-scala.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-sql.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-swift.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-typescript.min.js.download"></script>
    <script type="text/javascript" src="./How to Persist a Logged-in User in React_files/prism-yaml.min.js.download"></script>

    <script>
    // Conditionally remove social-row based on the publication language setting
    const hideSocialRowList = ['zh-cn'];
    const socialRow = document.getElementsByClassName('social-row')[0];

    if (hideSocialRowList.includes(`en`)) socialRow.remove();
    else {
        const title = `How%20to%20Persist%20a%20Logged-in%20User%20in%20React`.replace(/'/g, '%27');
        const twitter = `@debosthefirst`;
        const url = window.location;
        const thanks = `Thank%20you%20%40debosthefirst%20for%20writing%20this%20helpful%20article.` +
            `%0A%0A${title}%0A%0A${url}`;
        const button = document.getElementById('tweet-btn');
        button.addEventListener('click', () => {
            if (twitter) {
                window.open(`https://twitter.com/intent/tweet?text=${thanks}`, `share-twitter`, `width=550, height=235`);
                return false;
            }
            else {
                window.open(`https://twitter.com/intent/tweet?text=${title}%0A%0A${url}`, `share-twitter`, `width=550, height=235`);
                return false;
            }
        });
    }
</script>

<script>
    const learnToCodeCtaAnchorEl = document.getElementById('learn-to-code-cta');

    learnToCodeCtaAnchorEl.href = main['learn-to-code-cta-url'];
</script>

<script>
    $(document).ready(function () {
        // Start fitVids
        var $postContent = $(".post-full-content");
        $postContent.fitVids();
        // End fitVids
    });
</script>

<script>
    const navForumAnchorEl = document.getElementById('nav-forum');
    const navDonateAnchorEl = document.getElementById('nav-donate');

    navForumAnchorEl.href = main['forum-url'];
    navDonateAnchorEl.href = main['donate-url'];
</script>

<script>
    const bannerAnchorEl = document.getElementById('banner');

    bannerAnchorEl.href = main['banner-url'];
</script>

<script>
    const { trending, ...otherUrls } = footer;
    const footerDonationAnchorEl = document.getElementById('footer-donation');

    Object.keys(trending).forEach(key => {
        const anchorId = key.replace(/link|title/, '');
        const trendingAnchorEl = document.getElementById(anchorId);

        if (key.includes('link')) {
            trendingAnchorEl.href = trending[key]
        } else if (key.includes('title')) {
            trendingAnchorEl.textContent = trending[key];
        }
    });

    Object.keys(otherUrls).forEach(key => {
        const footerAnchorEl = document.getElementById(key);

        footerAnchorEl.href = otherUrls[key];
    });

    footerDonationAnchorEl.href = main['donate-url'];
</script>


    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->



</body></html>